[ { "type": "comment", "value": "**\n * Zend Framework (http:\/\/framework.zend.com\/)\n *\n * @link      http:\/\/github.com\/zendframework\/zf2 for the canonical source repository\n * @copyright Copyright (c) 2005-2013 Zend Technologies USA Inc. (http:\/\/www.zend.com)\n * @license   http:\/\/framework.zend.com\/license\/new-bsd New BSD License\n *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 9, "char": 9 }, { "type": "namespace", "name": "Cyant\\EventManager", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 16, "char": 2 }, { "type": "comment", "value": "**\n * Collection of signal handler return values\n *\n * We used to use a SplStack in Zend Framework 2, but using an array allows us some interesting\n * optimizations\n *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 17, "char": 5 }, { "type": "class", "name": "ResponseCollection", "abstract": 0, "final": 0, "definition": { "properties": [ { "visibility": [ "protected" ], "type": "property", "name": "responses", "docblock": "**\n     * @var array\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 26, "char": 6 }, { "visibility": [ "protected" ], "type": "property", "name": "stopped", "default": { "type": "bool", "value": "false", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 27, "char": 30 }, "docblock": "**\n     * @var bool\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 31, "char": 6 } ], "methods": [ { "visibility": [ "public" ], "type": "method", "name": "__construct", "parameters": [ { "type": "parameter", "name": "responses", "default": { "type": "null", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 32, "char": 49 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 32, "char": 49 } ], "statements": [ { "type": "if", "expr": { "type": "equals", "left": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 34, "char": 23 }, "right": { "type": "null", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 34, "char": 30 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 34, "char": 30 }, "statements": [ { "type": "let", "assignments": [ { "assign-type": "variable", "operator": "assign", "variable": "responses", "expr": { "type": "empty-array", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 35, "char": 31 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 35, "char": 31 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 36, "char": 9 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 38, "char": 10 }, { "type": "if", "expr": { "type": "not", "left": { "type": "fcall", "name": "is_array", "call-type": 1, "parameters": [ { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 38, "char": 31 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 38, "char": 33 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 38, "char": 33 }, "statements": [ { "type": "fcall", "expr": { "type": "fcall", "name": "trigger_error", "call-type": 1, "parameters": [ { "type": "string", "value": "First argument must be an array", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 39, "char": 60 }, { "type": "constant", "value": "E_USER_ERROR", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 39, "char": 74 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 39, "char": 75 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 40, "char": 9 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 42, "char": 11 }, { "type": "let", "assignments": [ { "assign-type": "object-property", "operator": "assign", "variable": "this", "property": "responses", "expr": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 42, "char": 40 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 42, "char": 40 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 43, "char": 5 } ], "docblock": "**\n     * @param array responses\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 49, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "stopped", "statements": [ { "type": "return", "expr": { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 52, "char": 21 }, "right": { "type": "variable", "value": "stopped", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 52, "char": 29 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 52, "char": 29 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 53, "char": 5 } ], "docblock": "**\n     * Did the last response provided trigger a short circuit of the stack?\n     *\n     * @return bool\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 60, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "setStopped", "parameters": [ { "type": "parameter", "name": "flag", "data-type": "bool", "mandatory": 0, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 61, "char": 44 } ], "statements": [ { "type": "let", "assignments": [ { "assign-type": "object-property", "operator": "assign", "variable": "this", "property": "stopped", "expr": { "type": "variable", "value": "flag", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 63, "char": 33 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 63, "char": 33 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 64, "char": 5 } ], "docblock": "**\n     * Mark the collection as stopped (or its opposite)\n     *\n     * @param  bool flag\n     * @return void\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 70, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "first", "statements": [ { "type": "fcall", "expr": { "type": "fcall", "name": "reset", "call-type": 1, "parameters": [ { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 73, "char": 20 }, "right": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 73, "char": 30 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 73, "char": 30 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 73, "char": 31 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 74, "char": 14 }, { "type": "return", "expr": { "type": "fcall", "name": "current", "call-type": 1, "parameters": [ { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 74, "char": 29 }, "right": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 74, "char": 39 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 74, "char": 39 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 74, "char": 40 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 75, "char": 5 } ], "docblock": "**\n     * Convenient access to the first handler return value.\n     *\n     * @return mixed The first handler return value\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 84, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "last", "statements": [ { "type": "declare", "data-type": "variable", "variables": [ { "variable": "last", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 87, "char": 17 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 11 }, { "type": "let", "assignments": [ { "assign-type": "variable", "operator": "assign", "variable": "last", "expr": { "type": "fcall", "name": "end", "call-type": 1, "parameters": [ { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 29 }, "right": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 39 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 39 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 40 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 88, "char": 40 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 90, "char": 10 }, { "type": "if", "expr": { "type": "identical", "left": { "type": "variable", "value": "last", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 90, "char": 19 }, "right": { "type": "bool", "value": "false", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 90, "char": 27 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 90, "char": 27 }, "statements": [ { "type": "return", "expr": { "type": "null", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 91, "char": 24 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 92, "char": 9 } ], "else_statements": [ { "type": "return", "expr": { "type": "variable", "value": "last", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 93, "char": 24 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 94, "char": 9 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 95, "char": 5 } ], "docblock": "**\n     * Convenient access to the last handler return value.\n     *\n     * If the collection is empty, returns null. Otherwise, returns value\n     * returned by last handler.\n     *\n     * @return mixed The last handler return value\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 102, "char": 6 }, { "visibility": [ "public" ], "type": "method", "name": "contains", "parameters": [ { "type": "parameter", "name": "value", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 103, "char": 35 } ], "statements": [ { "type": "return", "expr": { "type": "fcall", "name": "in_array", "call-type": 1, "parameters": [ { "type": "variable", "value": "value", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 30 }, { "type": "property-access", "left": { "type": "variable", "value": "this", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 37 }, "right": { "type": "variable", "value": "responses", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 47 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 47 }, { "type": "bool", "value": "true", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 53 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 105, "char": 54 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 106, "char": 5 } ], "docblock": "**\n     * Check if any of the responses match the given value.\n     *\n     * @param  mixed value The value to look for among responses\n     * @return bool\n     *", "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 107, "char": 1 } ], "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 107, "char": 1 }, "file": "\/Users\/antoine\/Workspace\/ZephirEvm\/cyant\/cyant\/eventmanager\/responsecollection.zep", "line": 108, "char": 0 } ]
